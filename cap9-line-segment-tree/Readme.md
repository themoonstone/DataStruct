- 什么是线段树:区间树
- 为什么要使用线段树,它能解决什么样的问题
    - 区间查询![image](http://note.youdao.com/yws/res/28526/556B2C3136BB487BA1233B0EF1870416)
    - 实质:基于区间的统计查询
    - 实例:假设有一个电商网站,想要查询该网站在2017年注册用户中消费最高的用户,消费最少的用户,学习时间最长的用户等等
    - 或者有一个太空信息网站,某个太空区间中天体的总量
    - 上面的问题都可以用数组实现,但用数组实现的时间复杂度是O(n),而使用线段树,则是O(logn)
- 总结
    - 对于给定区间
        - 更新:更新区间中的一个元素或一个区间的值
        - 查询:查询一个区间[i,j]的最大值,最小值,或区间数字和
- 什么是线段树
    - 线段树和普通二叉树一样,都有一个个节点构成,但它的每个节点都是有区间构成的  ![image](http://note.youdao.com/yws/res/28559/D2FC9447C6164336899DBB7CF1E3E282)
    - 如上图,以求和为例,树中的每个节点表示的都是该区间的数据和,根节点表示的是当前区间所有节点的数据和
- 线段树特点
    - 如图:![image](http://note.youdao.com/yws/res/28571/A9321A21E4B64DB282BD7880684D196C)线段树不一定是满二叉树,也不一定是完全二叉树
        - 什么是完全二叉树:如果一棵树不是满二叉树,那它多出来的节点只能在树的左边
    - 线段树是平衡二叉树
        - 什么是平衡二叉树:平衡二叉树的最大深度和最小深度的差值**最大为1**,如上图的线段树,其最大深度是5,最小深度是4,所以其深度为1
    - 堆也是平衡二叉树
- 思考:如果某区间有n个元素,要通过数组来表示该区间,需要多少个节点 ![image](http://note.youdao.com/yws/res/28587/16FAC14C55C340838C534DBD64183CB6)
    - 解答:这里可以将线段二叉树当成一个满二叉树(叶子节点中不存在值的地方设置为空),那么从上面的规律我们可以看到,第h层应该有2^(h-1)个节点,也就是说`2^(h-1)=n`,而前面所有节点数量的和大概也等于最后一层的节点树(等比数列求和,实际上是n-1),如果n恰好是2的k次方,那么所需要的节点总数应该是`2n`,如果n不是2的k次方,最坏的情况n=2^k+1,那么除第一层叶子 节点的前面所有层的节点数量大概是n,而第一层叶子节点的数量是n,最后一层的节点数量应该前面所有节点数量的和,也就是n+n=2n,所以最终应该是4n个节点
    - 注意:因为线段树一般不考虑添加元素,也就是说,它的区间是固定的,所以使用4n的表态空间即可,另外,我们这4n的空间利用率不是100% ![image](https://note.youdao.com/src/F02DC07D02AA4F2098508B5E8B25890C)